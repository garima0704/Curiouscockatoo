{"ast":null,"code":"import React,{createContext,useEffect,useState,useContext}from\"react\";import pb from\"../utils/pocketbaseClient\";import{jsx as _jsx}from\"react/jsx-runtime\";const ThemeContext=/*#__PURE__*/createContext();export const ThemeProvider=_ref=>{let{children}=_ref;const[theme,setTheme]=useState(null);useEffect(()=>{const fetchTheme=async()=>{try{const record=await pb.collection(\"site_settings\").getFirstListItem(\"\");setTheme({primary:record.primary_color,// e.g. #feb73f\nsurface:record.surface_color,// e.g. #f3f4f6\nbase:record.base_color,// e.g. #ffffff\nbox:record.box_color,// box bg\nfont:record.font_family_main||\"'Poppins', sans-serif\",logo:record.logo_url?pb.files.getURL(record,record.logo_url):null,favicon:record.favicon_url?pb.files.getURL(record,record.favicon_url):null,headerBg:record.header_bg_color// ✅ New field added\n});// Favicon setup\nif(record.favicon_url){const link=document.querySelector(\"link[rel~='icon']\");if(link){link.href=pb.files.getURL(record,record.favicon_url);}else{const newLink=document.createElement(\"link\");newLink.rel=\"icon\";newLink.href=pb.files.getURL(record,record.favicon_url);document.head.appendChild(newLink);}}// Font setup\nif(record.font_family_main){document.body.style.fontFamily=record.font_family_main;}// Background color\nif(record.base_color){document.body.style.backgroundColor=record.base_color;}}catch(err){console.error(\"Failed to load theme settings:\",err);}};fetchTheme();},[]);return/*#__PURE__*/_jsx(ThemeContext.Provider,{value:theme,children:children});};export const useTheme=()=>useContext(ThemeContext);","map":{"version":3,"names":["React","createContext","useEffect","useState","useContext","pb","jsx","_jsx","ThemeContext","ThemeProvider","_ref","children","theme","setTheme","fetchTheme","record","collection","getFirstListItem","primary","primary_color","surface","surface_color","base","base_color","box","box_color","font","font_family_main","logo","logo_url","files","getURL","favicon","favicon_url","headerBg","header_bg_color","link","document","querySelector","href","newLink","createElement","rel","head","appendChild","body","style","fontFamily","backgroundColor","err","console","error","Provider","value","useTheme"],"sources":["C:/Users/MY COMPUTER SERVICES/CuriousCockatoo/client/src/context/ThemeContext.jsx"],"sourcesContent":["import React, { createContext, useEffect, useState, useContext } from \"react\";\r\nimport pb from \"../utils/pocketbaseClient\";\r\n\r\nconst ThemeContext = createContext();\r\n\r\nexport const ThemeProvider = ({ children }) => {\r\n  const [theme, setTheme] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchTheme = async () => {\r\n      try {\r\n        const record = await pb.collection(\"site_settings\").getFirstListItem(\"\");\r\n\r\n        setTheme({\r\n          primary: record.primary_color,        // e.g. #feb73f\r\n          surface: record.surface_color,        // e.g. #f3f4f6\r\n          base: record.base_color,              // e.g. #ffffff\r\n          box: record.box_color,                // box bg\r\n          font: record.font_family_main || \"'Poppins', sans-serif\",\r\n          logo: record.logo_url ? pb.files.getURL(record, record.logo_url) : null,\r\n          favicon: record.favicon_url ? pb.files.getURL(record, record.favicon_url) : null,\r\n          headerBg: record.header_bg_color,     // ✅ New field added\r\n        });\r\n\r\n        // Favicon setup\r\n        if (record.favicon_url) {\r\n          const link = document.querySelector(\"link[rel~='icon']\");\r\n          if (link) {\r\n            link.href = pb.files.getURL(record, record.favicon_url);\r\n          } else {\r\n            const newLink = document.createElement(\"link\");\r\n            newLink.rel = \"icon\";\r\n            newLink.href = pb.files.getURL(record, record.favicon_url);\r\n            document.head.appendChild(newLink);\r\n          }\r\n        }\r\n\r\n        // Font setup\r\n        if (record.font_family_main) {\r\n          document.body.style.fontFamily = record.font_family_main;\r\n        }\r\n\r\n        // Background color\r\n        if (record.base_color) {\r\n          document.body.style.backgroundColor = record.base_color;\r\n        }\r\n\r\n      } catch (err) {\r\n        console.error(\"Failed to load theme settings:\", err);\r\n      }\r\n    };\r\n\r\n    fetchTheme();\r\n  }, []);\r\n\r\n  return (\r\n    <ThemeContext.Provider value={theme}>\r\n      {children}\r\n    </ThemeContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useTheme = () => useContext(ThemeContext);\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}